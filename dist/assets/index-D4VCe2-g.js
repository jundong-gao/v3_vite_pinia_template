/* empty css                                                     */import{w as e}from"./js/gaojundong_@vue_runtime-dom@3.4.19-B_z-8jkI.js";import{d as l,l as t,o as a,c as u,A as o,a as v,J as i,H as n,G as s,K as m,i as d}from"./js/gaojundong_@vue_runtime-core@3.4.19-CncSpy8U.js";import{k as c,u as r}from"./js/gaojundong_@vue_reactivity@3.4.19-4N_wAvkI.js";import{l as g,L as h}from"./js/gaojundong_@vue_shared@3.4.19-CyPW2GST.js";import{_ as p}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{g as j,n as f}from"./js/gaojundong_element-plus@2.5.6_vue@3.4.19-DQRU43ei.js";import"./js/gaojundong_lodash-es@4.17.21-DuYRbacB.js";import"./js/gaojundong_async-validator@4.2.5-Cuo4gI4y.js";import"./js/gaojundong_@vueuse_core@9.13.0_vue@3.4.19-noqSnwi2.js";import"./js/gaojundong_@vueuse_shared@9.13.0_vue@3.4.19-CSjWpbqh.js";import"./js/gaojundong_dayjs@1.11.10-BKYM6hcM.js";import"./js/gaojundong_@element-plus_icons-vue@2.3.1_vue@3.4.19-edFoSpwG.js";import"./js/gaojundong_@ctrl_tinycolor@3.6.1-D2oWfImC.js";import"./js/gaojundong_@sxzz_popperjs-es@2.11.7-D3lHDW-0.js";import"./js/gaojundong_normalize-wheel-es@1.2.0-Vn5vHDCm.js";const _={class:"base-cut-img"},x=p(l({__name:"index",props:{left:{},top:{},width:{},height:{}},setup(l,{expose:i}){let n=l,s=c(n.left||0),m=c(n.top||0),d=c(n.width||50),h=c(n.height||50),p=t((()=>({width:`${d.value}px`,height:`${h.value}px`,left:`${s.value}px`,top:`${m.value}px`}))),j=c({clientX:0,clientY:0,left:0,top:0}),f=c(!1);const x=e=>{var l,t;f.value=!0,j.value.clientX=e.clientX,j.value.clientY=e.clientY,j.value.left=s.value,j.value.top=m.value;let a=(null==(l=e.target.parentElement)?void 0:l.clientWidth)||0,u=(null==(t=e.target.parentElement)?void 0:t.clientHeight)||0;document.onmousemove=e=>{s.value=Math.max(0,j.value.left+e.clientX-j.value.clientX),m.value=Math.max(0,j.value.top+e.clientY-j.value.clientY),s.value=Math.min(a-d.value,s.value),m.value=Math.min(u-h.value,m.value)},document.onmouseup=()=>{f.value=!1,document.onmousemove=null,document.onmouseup=null}};let w=c({x:0,y:0,width:0,height:0,left:0,top:0}),y=c(!1);const b=(e,l)=>{var t,a,u,o;w.value.x=e.clientX,w.value.y=e.clientY,w.value.width=d.value,w.value.height=h.value,w.value.left=s.value,w.value.top=m.value,y.value=!0;let v=(null==(a=null==(t=e.target.parentElement)?void 0:t.parentElement)?void 0:a.getBoundingClientRect().width)||0,i=(null==(o=null==(u=e.target.parentElement)?void 0:u.parentElement)?void 0:o.getBoundingClientRect().height)||0;document.onmousemove=e=>{y.value&&("right-bottom"===l&&(h.value=w.value.height+e.clientY-w.value.y,d.value=w.value.width+e.clientX-w.value.x,h.value=Math.min(i-m.value,h.value),d.value=Math.min(v-s.value,d.value)),"left-top"===l&&(s.value=Math.max(w.value.left+e.clientX-w.value.x,0),m.value=Math.max(w.value.top+e.clientY-w.value.y,0),s.value>0&&(d.value=w.value.width-e.clientX+w.value.x),m.value>0&&(h.value=w.value.height-e.clientY+w.value.y)),"left-bottom"===l&&(s.value=w.value.left+e.clientX-w.value.x,s.value=Math.max(s.value,0),s.value>0&&(d.value=w.value.width-e.clientX+w.value.x),h.value=w.value.height+e.clientY-w.value.y,h.value>i-m.value&&(h.value=i-m.value)),"right-top"===l&&(m.value=w.value.top+e.clientY-w.value.y,m.value=Math.max(m.value,0),d.value=w.value.width+e.clientX-w.value.x,m.value>0&&(h.value=w.value.height-e.clientY+w.value.y),d.value>v-s.value&&(d.value=v-s.value)))},document.onmouseup=()=>{y.value=!1,document.onmousemove=null,document.onmouseup=null}};return i({maskStyle:{left:s,top:m,width:d,height:h}}),(l,t)=>(a(),u("div",_,[o(l.$slots,"default",{},void 0,!0),v("div",{class:"base-cut-img-mask",style:g(r(p)),onMousedown:e(x,["stop"])},[v("div",{class:"base-cut-img-btns-item left-top",onMousedown:t[0]||(t[0]=e((e=>b(e,"left-top")),["stop"]))},null,32),v("div",{class:"base-cut-img-btns-item left-bottom",onMousedown:t[1]||(t[1]=e((e=>b(e,"left-bottom")),["stop"]))},null,32),v("div",{class:"base-cut-img-btns-item right-top",onMousedown:t[2]||(t[2]=e((e=>b(e,"right-top")),["stop"]))},null,32),v("div",{class:"base-cut-img-btns-item right-bottom",onMousedown:t[3]||(t[3]=e((e=>b(e,"right-bottom")),["stop"]))},null,32)],36)]))}}),[["__scopeId","data-v-14fd91d4"]]),w={class:"flex"},y={class:"left flex-jac"},b=["src"],M={class:"right flex-jac"},X=["src"],Y={key:0,class:"flex-aic"},k=p(l({__name:"index",setup(e){const l=c({}),o=t((()=>{var e;return null==(e=l.value)?void 0:e.maskStyle})),r=c(""),g=c(""),p=e=>(r.value=URL.createObjectURL(e.file),Promise.resolve()),_=()=>{let e=document.querySelector(".left-img"),l=document.createElement("canvas"),t=l.getContext("2d");l.width=e.width,l.height=e.height,t.drawImage(e,0,0,l.width,l.height);let a=document.createElement("canvas"),u=a.getContext("2d");a.width=o.value.width.value,a.height=o.value.height.value,u.drawImage(l,o.value.left.value,o.value.top.value,o.value.width.value,o.value.height.value,0,0,o.value.width.value,o.value.height.value);let v=a.toDataURL();g.value=v};return(e,t)=>{const c=x,k=j,E=f;return a(),u("div",null,[i(h(o.value)+" ",1),v("div",w,[v("div",y,[r.value?(a(),n(c,{key:0,ref_key:"cutRef",ref:l,class:"left-img-box",left:80,top:80,width:140,height:140},{default:s((()=>[v("img",{class:"left-img",src:r.value,draggable:"false"},null,8,b)])),_:1},512)):m("",!0),r.value?m("",!0):(a(),n(E,{key:1,accept:"image/*",action:"#","show-file-list":!1,"http-request":p},{default:s((()=>[d(k,{type:"primary",size:"small"},{default:s((()=>[i("选择图片")])),_:1})])),_:1}))]),v("div",M,[v("img",{class:"right-img",src:g.value},null,8,X)])]),r.value?(a(),u("div",Y,[d(E,{accept:"image/*",action:"#","show-file-list":!1,"http-request":p},{default:s((()=>[d(k,{type:"primary",size:"small"},{default:s((()=>[i("重新选择")])),_:1})])),_:1}),d(k,{class:"ml-2 mt-[2px]",type:"primary",onClick:_,size:"small"},{default:s((()=>[i("确定")])),_:1})])):m("",!0)])}}}),[["__scopeId","data-v-c5e3a014"]]);export{k as default};
