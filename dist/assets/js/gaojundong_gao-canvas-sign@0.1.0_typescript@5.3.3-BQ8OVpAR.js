import{d as t,m as o,o as e,c as n}from"./gaojundong_@vue_runtime-core@3.4.19-BpEXqTuW.js";import{k as i}from"./gaojundong_@vue_reactivity@3.4.19-BAlQ3FKq.js";var r=Object.defineProperty,s=(t,o,e)=>(((t,o,e)=>{o in t?r(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e})(t,"symbol"!=typeof o?o+"":o,e),e);let a;const u=new Uint8Array(16);function l(){if(!a&&(a=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(u)}const d=[];for(let w=0;w<256;++w)d.push((w+256).toString(16).slice(1));const c={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function h(t,o,e){if(c.randomUUID&&!o&&!t)return c.randomUUID();const n=(t=t||{}).random||(t.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,o){e=e||0;for(let t=0;t<16;++t)o[e+t]=n[t];return o}return function(t,o=0){return d[t[o+0]]+d[t[o+1]]+d[t[o+2]]+d[t[o+3]]+"-"+d[t[o+4]]+d[t[o+5]]+"-"+d[t[o+6]]+d[t[o+7]]+"-"+d[t[o+8]]+d[t[o+9]]+"-"+d[t[o+10]]+d[t[o+11]]+d[t[o+12]]+d[t[o+13]]+d[t[o+14]]+d[t[o+15]]}(n)}const p=["id"],f=t({__name:"index",props:{width:{default:300},height:{default:300},color:{default:"#000"},backgroundColor:{default:"#ccc"},lineWidth:{default:2}},setup(t,{expose:r}){let a,u=t;const l=i(`gao-canvas-sign-${h()}`);function d(){let t=window.devicePixelRatio||1;a=document.getElementById(l.value);let o=a.getContext("2d");a.style.width=`${u.width}px`,a.style.height=`${u.height}px`,a.width=u.width*t,a.height=u.height*t,o.scale(t,t),o.rect(0,0,a.width,a.height),o.fillStyle=u.backgroundColor,o.fill(),"ontouchstart"in window?a.ontouchstart=t=>{t.preventDefault();let o=t.touches[0],n=o.pageX-a.clientLeft,i=o.pageY-a.clientTop,r=new e(n,i,u.color);window.ontouchmove=t=>{let o=t.touches[0],e=o.pageX-a.clientLeft,n=o.pageY-a.clientTop;r.addPoint(e,n),r.draw()},window.ontouchend=()=>{window.ontouchmove=null,window.ontouchend=null}}:a.onmousedown=t=>{let o=new e(t.offsetX,t.offsetY,u.color);window.onmousemove=t=>{o.addPoint(t.offsetX,t.offsetY),o.draw()},window.onmouseup=()=>{window.onmousemove=null,window.onmouseup=null}};class e{constructor(t,o,e="#000"){s(this,"startX"),s(this,"startY"),s(this,"color"),s(this,"points"),this.startX=t,this.startY=o,this.color=e,this.points=[]}addPoint(t,o){this.points.push({x:t,y:o})}draw(){o.beginPath(),o.moveTo(this.startX,this.startY),o.lineCap="round",o.lineWidth=u.lineWidth,o.strokeStyle=this.color,this.points.forEach((t=>{o.lineTo(t.x,t.y)})),o.stroke()}}}return o((()=>{d()})),r({getUrl:function(){return a.toDataURL("image/png")},getBlob:function(){return new Promise((t=>{a.toBlob((o=>{t(o)}))}))},reset:function(){a.getContext("2d").clearRect(0,0,a.width,a.height),d()}}),(t,o)=>(e(),n("canvas",{id:l.value},null,8,p))}});export{f as j};
