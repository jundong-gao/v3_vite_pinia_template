import{d as e,m as t,D as a,o as s,c as o,A as n,a as i,i as r,G as l,F as d,Z as c,_ as u,J as f}from"./vender_@vue_runtime-core@3.4.19-DxPlDNzv.js";import{k as p}from"./vender_@vue_reactivity@3.4.19-dBGfcXZR.js";import{_ as v}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./vender_@vue_shared@3.4.19-CyPW2GST.js";const x=v(e({__name:"index",props:{config:{default:()=>({text:"测试水印",color:"#999",fontSize:14,gap:40,zIndex:9999})}},setup(e){let i={...e.config},r=p(null),l=(e=>{let t=document.createElement("canvas"),a=t.getContext("2d"),s=e.fontSize*devicePixelRatio;a.font=`${s}px Microsoft YaHei`;const{width:o}=null==a?void 0:a.measureText(e.text),n=Math.max(50,o)+e.gap*devicePixelRatio;return t.width=n,t.height=n,a.translate(n/2,n/2),a.rotate(Math.PI/180*-45),a.fillStyle=e.color,a.font=`${s}px Microsoft YaHei`,a.textBaseline="middle",a.textAlign="center",a.fillText(e.text,0,0),{base64:t.toDataURL("image/png"),size:n/devicePixelRatio}})(i),d=null;const c=()=>{if(!r.value)return;let{base64:e,size:t}=l;d&&d.remove(),d=document.createElement("div"),d.style.position="absolute",d.style.backgroundImage=`url(${e})`,d.style.backgroundSize=`${t}px ${t}px`,d.style.backgroundRepeat="repeat",d.style.zIndex=String(i.zIndex),d.style.inset="0",d.style.pointerEvents="none",r.value.appendChild(d)};let u=new MutationObserver((e=>{for(const t of e){for(const e of t.removedNodes)e===d&&c();t.target===d&&c()}}));return t((()=>{c(),u.observe(r.value,{childList:!0,subtree:!0,attributes:!0})})),a((()=>{u.disconnect()})),(e,t)=>(s(),o("div",{class:"base-water-mark-container",ref_key:"parentRef",ref:r},[n(e.$slots,"default",{},void 0,!0)],512))}}),[["__scopeId","data-v-5bcda3e6"]]),m={},g=e=>(c("data-v-df26a059"),e=e(),u(),e),_=g((()=>i("div",{class:"mb-6 bg-sky-800 text-white p-3 font-bold"},[f(" 防篡改 文字水印 "),i("div",null,"不可删除、不可修改")],-1))),b={class:"flex-aic flex-wrap"},h=g((()=>i("div",{class:"content"},"文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容",-1))),y=g((()=>i("div",{class:"content"},"文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容",-1)));const z=v(m,[["render",function(e,t){const a=x;return s(),o(d,null,[_,i("div",b,[r(a,{class:"mr-20 w-[350px]"},{default:l((()=>[h])),_:1}),r(a,{class:"w-[350px]",config:{color:"red",fontSize:12,text:"水印",gap:30}},{default:l((()=>[y])),_:1})])],64)}],["__scopeId","data-v-df26a059"]]);export{z as default};
