import{d as e,r as t,M as a,N as s,o as n,c as o,O as l,a as i,b as r,w as d,F as c,p as f,n as u,e as p}from"./index-BprMLbqP.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";const v=x(e({__name:"index",props:{config:{default:()=>({text:"测试水印",color:"#999",fontSize:14,gap:40,zIndex:9999})}},setup(e){let i={...e.config},r=t(null),d=(e=>{let t=document.createElement("canvas"),a=t.getContext("2d"),s=e.fontSize*devicePixelRatio;a.font=`${s}px Microsoft YaHei`;const{width:n}=null==a?void 0:a.measureText(e.text),o=Math.max(50,n)+e.gap*devicePixelRatio;return t.width=o,t.height=o,a.translate(o/2,o/2),a.rotate(Math.PI/180*-45),a.fillStyle=e.color,a.font=`${s}px Microsoft YaHei`,a.textBaseline="middle",a.textAlign="center",a.fillText(e.text,0,0),{base64:t.toDataURL("image/png"),size:o/devicePixelRatio}})(i),c=null;const f=()=>{if(!r.value)return;let{base64:e,size:t}=d;c&&c.remove(),c=document.createElement("div"),c.style.position="absolute",c.style.backgroundImage=`url(${e})`,c.style.backgroundSize=`${t}px ${t}px`,c.style.backgroundRepeat="repeat",c.style.zIndex=String(i.zIndex),c.style.inset="0",c.style.pointerEvents="none",r.value.appendChild(c)};let u=new MutationObserver((e=>{for(const t of e){for(const e of t.removedNodes)e===c&&f();t.target===c&&f()}}));return a((()=>{f(),u.observe(r.value,{childList:!0,subtree:!0,attributes:!0})})),s((()=>{u.disconnect()})),(e,t)=>(n(),o("div",{class:"base-water-mark-container",ref_key:"parentRef",ref:r},[l(e.$slots,"default",{},void 0,!0)],512))}}),[["__scopeId","data-v-5bcda3e6"]]),g={},m=e=>(f("data-v-df26a059"),e=e(),u(),e),b=m((()=>i("div",{class:"mb-6 bg-sky-800 text-white p-3 font-bold"},[p(" 防篡改 文字水印 "),i("div",null,"不可删除、不可修改")],-1))),_={class:"flex-aic flex-wrap"},h=m((()=>i("div",{class:"content"},"文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容",-1))),y=m((()=>i("div",{class:"content"},"文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容",-1)));const w=x(g,[["render",function(e,t){const a=v;return n(),o(c,null,[b,i("div",_,[r(a,{class:"mr-20 w-[350px]"},{default:d((()=>[h])),_:1}),r(a,{class:"w-[350px]",config:{color:"red",fontSize:12,text:"水印",gap:30}},{default:d((()=>[y])),_:1})])],64)}],["__scopeId","data-v-df26a059"]]);export{w as default};
