/* empty css                                                     */import{_ as e}from"./index.vue_vue_type_script_lang-fIgc0J5K.js";import{h as t,g as a,v as s,i,j as l,k as r,e as o}from"./js/gaojundong_element-plus@2.5.6_vue@3.4.19-vwycjdQS.js";import{d as n,i as u,H as h,C as d,q as p,o as g,E as m,G as c,K as j}from"./js/gaojundong_@vue_runtime-core@3.4.19-B_DqhbiT.js";import{k as y,u as f}from"./js/gaojundong_@vue_reactivity@3.4.19-BAlQ3FKq.js";import{t as _}from"./test-B4nEBog6.js";import{L as v}from"./js/gaojundong_@vue_shared@3.4.19-DM82F0Lm.js";import"./js/gaojundong_@vue_runtime-dom@3.4.19-D5SUXjx0.js";import"./js/gaojundong_lodash-es@4.17.21-DuYRbacB.js";import"./js/gaojundong_async-validator@4.2.5-Cuo4gI4y.js";import"./js/gaojundong_@vueuse_core@9.13.0_vue@3.4.19-6u3Ecg0h.js";import"./js/gaojundong_@vueuse_shared@9.13.0_vue@3.4.19-CVP7fUGR.js";import"./js/gaojundong_dayjs@1.11.10-BKYM6hcM.js";import"./js/gaojundong_@element-plus_icons-vue@2.3.1_vue@3.4.19-BS2I2cMU.js";import"./js/gaojundong_@ctrl_tinycolor@3.6.1-D2oWfImC.js";import"./js/gaojundong_@sxzz_popperjs-es@2.11.7-D3lHDW-0.js";import"./js/gaojundong_normalize-wheel-es@1.2.0-Vn5vHDCm.js";import"./js/gaojundong_axios@1.6.7-X0xcXtXw.js";const b=n({props:{columns:{type:Array,default:()=>[]},searchRowNum:{type:Number,default:4},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"},api:{type:Function,default:()=>null},showPage:{type:Boolean,default:!0}},setup:()=>({tableData:y([]),loading:y(!1),searchParams:y({}),searchFormRef:y({}),pageNum:y(1),pageSize:y(10),total:y(0),pageSizes:y([10,20,30,40]),layout:y("total, sizes, prev, pager, next, jumper")}),computed:{searchColumns(){let e=this.columns.filter((e=>e.search));return e.length&&e.push({label:"",key:"search",span:e.length%this.searchRowNum==0?24:24/this.searchRowNum}),e}},render(){let r;return u("div",null,[u("div",{class:"base-table-search"},[u(t,{ref:"searchFormRef",model:this.searchParams},{default:()=>[u(e,{"row-num":this.searchRowNum,columns:this.searchColumns,"form-data":this.searchParams},{search:()=>u("div",{class:"flex-jasc-end"},[u(a,{onClick:()=>this.reset()},{default:()=>[this.resetText]}),u(a,{type:"primary",onClick:()=>this.search()},{default:()=>[this.searchText]})])})]})]),h(u(i,d({border:!1,data:this.tableData},this.$attrs),(o=r=this.columns.map((e=>this.renderTableColumn(e))),"function"==typeof o||"[object Object]"===Object.prototype.toString.call(o)&&!p(o)?r:{default:()=>[r]})),[[s,this.loading]]),this.showPage?u("div",{class:"flex-jasc-end p-[10px]"},[u(l,{layout:this.layout,"page-sizes":this.pageSizes,small:!0,background:!0,total:this.total,modelValue:this.pageNum,modelModifiers:{"current-page":!0},"onUpdate:modelValue":[e=>this.pageNum=e,e=>this.pageSize=e],onSizeChange:e=>this.sizeChange(e),onCurrentChange:e=>this.currentChange(e)},null)]):null]);var o},mounted(){this.reset()},methods:{renderTableColumn(e){if(e.hidden)return null;let t={};this.$slots[e.key]&&(t.default=t=>{var a,s;return null==(s=(a=this.$slots)[e.key])?void 0:s.call(a,t)}),this.$slots[e.key+"Header"]&&(t.header=t=>{var a,s;return null==(s=(a=this.$slots)[e.key+"Header"])?void 0:s.call(a,t)});let a={...e};return delete a.children,u(r,d({align:"center"},a,{prop:e.key}),{default:()=>[e.children?e.children.map((e=>this.renderTableColumn(e))):null],...t})},getList(){"function"==typeof this.api&&(this.loading=!0,this.api({...this.searchParams,pageNum:this.pageNum,pageSize:this.pageSize}).then((e=>{this.tableData=e.data.list,this.total=e.data.total,0===this.tableData.length&&this.pageNum>1&&(this.pageNum=1,this.getList())})).finally((()=>{this.loading=!1})))},search(){this.getList()},reset(){this.searchFormRef.resetFields(),this.pageNum=1,this.getList()},sizeChange(e){this.pageSize=e,this.getList()},currentChange(e){this.pageNum=e,this.getList()}}}),k=n({__name:"index",setup(e){const t=y([{label:"姓名",key:"name",search:!0,type:"input"},{label:"信息",key:"salary",children:[{label:"信息1",key:"info1"},{label:"信息2",key:"info2"}]},{label:"年龄",key:"age",width:600,search:!0,type:"select",data:[],async:()=>Promise.resolve([{label:"18-25岁",value:1},{label:"26-35岁",value:2}])},{label:"性别",key:"gender"},{label:"电话",key:"phone",search:!0,type:"input"},{label:"操作",key:"action",fixed:"right",width:200}]),s=e=>{let t={...e,page:e.pageNum};return o.success(`请求参数===>${JSON.stringify(t)}`),_(t).then((e=>({data:{list:e.data,total:100}})))};return(e,i)=>{const l=a,r=b;return g(),m(r,{columns:f(t),stripe:"",api:s,"max-height":"calc(100vh - 210px)"},{age:c((({row:e})=>[j("自定义年龄表格单元 ====> "+v(e),1)])),info2Header:c((e=>[j("自定义表头 ==== "+v(e.column.label),1)])),action:c((()=>[u(l,{size:"small",type:"danger",link:""},{default:c((()=>[j("删除")])),_:1}),u(l,{size:"small",link:"",type:"primary"},{default:c((()=>[j("编辑")])),_:1})])),_:1},8,["columns"])}}});export{k as default};
